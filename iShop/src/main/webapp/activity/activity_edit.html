<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="renderer" content="webkit">
    <title>创建活动</title>
    <link href="../css/bootstrap.min.css?v=3.4.0" rel="stylesheet">
    <link href="../css/style.css?v=2.2.0" rel="stylesheet">
    <link rel="stylesheet" href="../css/font_style.css">
    <link rel="stylesheet" type="text/css" href="../css/jquery.searchableSelect.css">
    <link rel="stylesheet" href="../css/font_style.css">
    <link rel="stylesheet" type="text/css" href="../css/tips.css">
    <link rel="stylesheet" type="text/css" href="../js/artDialog/skins/default.css">
    <style>
        body{
            margin-top:81px;
        }
        .editor_line{
            margin-top: 0;
            border-top:none;
        }
        .hr{
            float: left;
            width:35%;
            margin: 20px 60px 5px 20px;
            height: 2px;
            background-color: #e0e0e0;
        }
        .hr_s{
            width: 543px;
            height: 2px;
            background-color: #e0e0e0;
        }
        .operedit_btn li{
            width: 160px;
            height: 30px;
            display: inline-block;
            list-style: none;
            float: left;
            margin-left: 20px;
            color: #ffffff;
            line-height: 30px;
            text-align: center;
            border-radius: 4px;
            font-size: 14px;
            letter-spacing: 10px;
            cursor: pointer;
        }
        .activity_date input{
            width: 185px;
        }
        .activity_date #start{
            margin-left: -5px;
        }
        .activity_date span{
            margin: 0 15px;
        }
        .abstract textarea{
            width: 420px;
            height: 80px;
            outline: none;
            padding: 8px;
        }
        .create_src{
            display: inline-block;
            width:100px;
            height: 30px;
            line-height: 30px;
            text-align: center;
            cursor:pointer ;
            background: #6dc1c8;
            color: #fff;
            border-radius: 5px;
        }
        .conpany_msg .src_input{
            width: 310px;
            margin-right: 8px;
        }
        .arrow_right{
            position: absolute;
            right: 0;
            top:-5px;
            width:30px;
            height: 30px;
            border-radius: 0 5px 5px 0;
            color: #fff;
            line-height: 30px;
            text-align: center;
            background: #6dc1c8;
        }
        .execution{
            width: 420px;
            position: absolute;
            left: 123px;
            top: 30px;
            z-index: 100;
            border: 1px solid #a9c9e2;
            background: #f5f5f5;
            display: none;
        }
        .execution li{
            cursor: pointer;
            height: 30px;
            line-height: 30px;
            padding-left: 5px;
        }
        .execution li:hover{
            background: #4a5f7c;
            color: #fff;
        }
        .tk{
            display: none;
            width: 280px;
            height: 180px;
            border-radius: 5px;
            background: #fff;
            position: absolute;
            top:300px;
            left: 30%;
            z-index: 1000;
            box-shadow: 0 0 10px rgba(0,0,0,0.35);
        }
        .tk span{
            position: absolute;
            right: 5px;
            top: 5px;
            font-size: 16px;
            cursor: pointer;
        }
        .tk .tip{
            padding: 50px 20px;
            height: 140px;
            text-align: center;
            font-size: 14px;
            color: #888888;
        }
        .tk .btn{
            padding: 0;
            margin-left: 30px;
        }
        .tk em{
            float: left;
            display: inline-block;
            font-style: normal;
            width: 100px;
            height: 30px;
            line-height: 30px;
            cursor: pointer;
        }
        .tk .cancel{
            background-color: #e8e8e8;
            color: #888;
            font-size: 14px;
            border-radius: 5px;
        }
        .tk .enter{
            background-color: #cd706e;
            color: #fff;
            font-size: 14px;
            border-radius: 5px;
            margin-left: 20px;
        }
        .box_shadow{
            display: none;
            width: 100%;
            height: 1200px;
            position: absolute;
            top: 45%;
            left: 0;
            z-index: 100;
        }
        .performance{
            background: #d1d1d1;
        }
        #performance{
            background: #8f9ad2;
        }
        #edit{
            margin-left: 120px;
            width: 420px;
            margin-top: -20px;
        }
        #edit div{
            margin-bottom: 0;
        }
        #edui1_elementpath{
            display: none;
         }
    </style>
</head>
<body>
<div id="page-wrapper" class="gray-bg dashbard-1">
    <div class="col-lg-12 pre_title"><span>活动管理</span><i class="icon-ishop_8-03"></i><span id="back_corp_param">活动列表</span><i class="icon-ishop_8-03"></i><label>创建活动</label></div>
    <div class="col-lg-12">
        <hr class="hr" />
        <div class="operedit_btn">
            <ul>
                <li class="performance"><i class="icon-ishop_6-20 "></i>执行</li>
                <li style="background: #6dc1c8" id="save"><i class="icon-ishop_6-04"></i>保存</li>
                <li style="background: #4a5f7c"><i class="icon-ishop_6-12"></i>关闭</li>
            </ul>
        </div>
    </div>
    <div class="editor_em col-lg-7 editor_line  animated fadeInRight">
        <form class="conpany_msg">
            <div>
                <ul style="display:inline-flex;">
                    <li><label style="color:#c26555;">所属企业*</label></li>
                    <input class="PARAM_NAME" readonly/>
                </ul>
            </div>
            <div>
                <span><label style="color:#c26555;">活动主题*</label><input type="text"/></span>
            </div>
            <div>
                <ul style="display:inline-flex;position: relative">
                    <li><label style="color:#c26555;">执行方式*</label></li>
                    <input  class="PARAM_NAME" id="execution_input" value="(任务)电话通知顾客" readonly/>
                    <ul class="execution" id="execution">
                        <li>(任务)电话通知顾客</li>
                        <li>(任务)短信通知顾客</li>
                        <li>系统短信通知顾客</li>
                        <li>(任务)分享链接到社交平台</li>
                        <li>微信公众号推送</li>
                    </ul>
                </ul>
            </div>
            <div>
                <span class="activity_date">
                    <label>活动时间</label>
                    <input type="text" id="start" readonly="true" placeholder="请输入日期" class="laydate-icon"/>
                    <span>~</span>
                    <input type="text" id="end" readonly="true" placeholder="请输入日期" class="laydate-icon"/>
                </span>
            </div>
            <div>
                <span style="position: relative">
                    <label>目标会员</label><input type="text"/>
                    <span class="arrow_right"><i class="icon-ishop_8-03"></i></span>
                </span>
            </div>
            <div class="executor">
                <span style="position: relative">
                    <label>执行人</label><input type="text"/>
                    <span class="arrow_right"><i class="icon-ishop_8-03"></i></span>
                </span>
            </div>
            <hr class="hr_s"/>
            <div class="send_title" style="display: none">
                <span><label>推送标题</label><input type="text" placeholder="请输入活动主题"/></span>
            </div>
            <div class="summary" style="display: none">
                <span style="display: inline-flex;width:100%"><label>简介</label><span class="abstract" ><textarea  placeholder="请输入活动简介"></textarea></span></span>
            </div>
            <div class="task_title">
                <span><label>任务标题</label><input type="text" placeholder="未选择"/></span>
            </div>
            <div class="task_dec">
                <span style="display: inline-flex;width:100%"><label>任务描述</label><span class="abstract" ><textarea  placeholder="未选择"></textarea></span></span>
            </div>
            <div class="short_msg" style="display: none">
                <span style="display: inline-flex;width:100%"><label>短信正文</label><span class="abstract" ><textarea  placeholder="请输入活动简介"></textarea></span></span>
            </div>
            <div>
                <span><label>外部链接</label><input type="text"/></span>
            </div>
            <div>
                <label>商品卖点</label>
                <section >
                    <div id='edit'>
                        <script id="editor" type="text/plain" style="width:420px;height:286px;"></script>
                    </div>
                </section>
            </div>
            <div>
                <span>
                    <label></label><input type="text" class="src_input"/>
                    <span class="create_src">生成链接</span>
                </span>
            </div>
        </form>
    </div>
    <div class="editor_detail_em col-lg-4  animated fadeInRight">
        <form class="msg_detail">
            <div>
                <span><label>创建时间</label><input type="text" id="created_time" readonly/></span>
            </div>
            <div>
                <span><label>创建人</label><input type="text" id="creator" readonly/></span>
            </div>
            <div>
                <span><label>修改时间</label><input type="text" id="modify_time" readonly/></span>
            </div>
            <div>
                <span><label>修改人</label><input type="text" id="modifier" readonly/></span>
            </div>
            <div>
                <span><label>可用</label><em class="checkbox_isactive"><input type="checkbox" value="" name="test" class="check" checked="true" id="is_active"><label for="is_active"></label></em></span>
            </div>
        </form>
    </div>
    <div class="tk" id="tk">
        <span class="icon-ishop_6-12" id="X"></span>
        <div class="tip">分配执行后,任务将不可更改或删除。确认执行该任务?</div>
        <div class="btn">
            <em class="cancel" id="cancel">取消</em>
            <em class="enter">确认执行</em>
        </div>
    </div>
    <div class="box_shadow"></div>
</div>
<!-- Mainly scripts -->
<script src="../js/jquery-2.1.1.min.js"></script>
<script src="../js/bootstrap.min.js?v=3.4.0"></script>
<script src="../js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
<script src="../js/insidePostRequire.js"></script>
<script type="text/javascript" src="../js/laydate/laydate.js"></script>
<script src="../js/artDialog/jquery.artDialog.js"></script>
<script src="../js/loading.js"></script>
<script src="../js/artDialog/plugins/iframeTools.js"></script>
<!-- 带搜索的下拉框 -->
<script type="text/javascript" src="../js/jquery.searchableSelect.js"></script>
<script type="text/javascript" src="../js/moni_select.js"></script>
<!--富文本编辑-->
<script type="text/javascript" charset="utf-8" src="../goods/ueditor/ueditor.config.js"></script>
<script type="text/javascript" charset="utf-8" src="../goods/ueditor/ueditor.all.min.js"> </script>
<script type="text/javascript" charset="utf-8" src="../goods/ueditor/ueditor.all.js"> </script>
<script type="text/javascript" charset="utf-8" src="../goods/ueditor/lang/zh-cn/zh-cn.js"></script>
<script>
    //保存按钮
    $("#save").click(function () {
        $(".performance").attr("id","performance");
        //点击执行
        $("#performance").click(function () {
            $(".box_shadow").show();
            $(".tk").show();
        });
    });
    //日期插件调用
    $("#start").click(laydate({elem: '#start',istime: true, format: 'YYYY-MM-DD'}));
    $("#end").click(laydate({elem: '#end',istime: true, format: 'YYYY-MM-DD'}));
    //执行方式下拉选择
    $("#execution li").click(function () {
        var val = $(this).html();
        $("#execution_input").val(val);
        if(val == "(任务)电话通知顾客" || val == "(任务)短信通知顾客" || val == "(任务)分享链接到社交平台"){
            $(".executor").show();
            $(".task_dec").show();
            $(".task_title").show();
            $(".send_title").hide();
            $(".summary").hide();
            $(".short_msg").hide();
        }else if(val == "系统短信通知顾客"){
            $(".executor").show();
            $(".task_dec").hide();
            $(".task_title").hide();
            $(".send_title").hide();
            $(".summary").hide();
            $(".short_msg").show();
        }else if(val == "微信公众号推送"){
            $(".executor").hide();
            $(".task_dec").hide();
            $(".task_title").hide();
            $(".send_title").show();
            $(".summary").show();
            $(".short_msg").hide();
        }
    });
    $("#execution_input").click(function () {
        $("#execution").toggle();
    });
    $(document).click(function (e) {
        if($(e.target).is("#execution_input")){

        }else {
            $("#execution").hide();
        }
    });
    //关闭弹出层
    $("#cancel").click(close_float);
    $("#X").click(close_float);
    function close_float() {
        $(".box_shadow").hide();
        $(".tk").hide();
    }

    //实例化编辑器
    //建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
    var ue = UE.getEditor('editor');

    function isFocus(e){
        alert(UE.getEditor('editor').isFocus());
        UE.dom.domUtils.preventDefault(e)
    }
    function setblur(e){
        UE.getEditor('editor').blur();
        UE.dom.domUtils.preventDefault(e)
    }
    function insertHtml() {
        var value = prompt('插入html代码', '');
        UE.getEditor('editor').execCommand('insertHtml', value)
    }
    function createEditor() {
        enableBtn();
        UE.getEditor('editor');
    }
    function getAllHtml() {
        alert(UE.getEditor('editor').getAllHtml())
    }
    function getContent() {
        var arr = [];
        arr.push("使用editor.getContent()方法可以获得编辑器的内容");
        arr.push("内容为：");
        arr.push(UE.getEditor('editor').getContent());
        console.log(arr.join("\n"));
    }
    function getPlainTxt() {
        var arr = [];
        arr.push("使用editor.getPlainTxt()方法可以获得编辑器的带格式的纯文本内容");
        arr.push("内容为：");
        arr.push(UE.getEditor('editor').getPlainTxt());
        alert(arr.join('\n'))
    }
    function setContent(isAppendTo) {
        var arr = [];
        arr.push("使用editor.setContent('欢迎使用ueditor')方法可以设置编辑器的内容");
        UE.getEditor('editor').setContent('欢迎使用ueditor', isAppendTo);
        alert(arr.join("\n"));
    }
    function setDisabled() {
        UE.getEditor('editor').setDisabled('fullscreen');
        disableBtn("enable");
    }

    function setEnabled() {
        UE.getEditor('editor').setEnabled();
        enableBtn();
    }

    function getText() {
        //当你点击按钮时编辑区域已经失去了焦点，如果直接用getText将不会得到内容，所以要在选回来，然后取得内容
        var range = UE.getEditor('editor').selection.getRange();
        range.select();
        var txt = UE.getEditor('editor').selection.getText();
        alert(txt)
    }

    function getContentTxt() {
        var arr = [];
        arr.push("使用editor.getContentTxt()方法可以获得编辑器的纯文本内容");
        arr.push("编辑器的纯文本内容为：");
        arr.push(UE.getEditor('editor').getContentTxt());
        console.log(arr.join("\n"));
    }
    function hasContent() {
        var arr = [];
        arr.push("使用editor.hasContents()方法判断编辑器里是否有内容");
        arr.push("判断结果为：");
        arr.push(UE.getEditor('editor').hasContents());
        alert(arr.join("\n"));
    }
    function setFocus() {
        UE.getEditor('editor').focus();
    }
    function deleteEditor() {
        disableBtn();
        UE.getEditor('editor').destroy();
    }
    function disableBtn(str) {
        var div = document.getElementById('btns');
        var btns = UE.dom.domUtils.getElementsByTagName(div, "button");
        for (var i = 0, btn; btn = btns[i++];) {
            if (btn.id == str) {
                UE.dom.domUtils.removeAttributes(btn, ["disabled"]);
            } else {
                btn.setAttribute("disabled", "true");
            }
        }
    }
    function enableBtn() {
        var div = document.getElementById('btns');
        var btns = UE.dom.domUtils.getElementsByTagName(div, "button");
        for (var i = 0, btn; btn = btns[i++];) {
            UE.dom.domUtils.removeAttributes(btn, ["disabled"]);
        }
    }

    function getLocalData () {
        alert(UE.getEditor('editor').execCommand( "getlocaldata" ));
    }

    function clearLocalData () {
        UE.getEditor('editor').execCommand( "clearlocaldata" );
        alert("已清空草稿箱")
    }
</script>
</body>
</html>